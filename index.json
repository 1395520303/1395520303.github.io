[{"content":"æš‚æ—¶æ²¡æƒ³å¥½è¿™é‡Œè¦å†™ä»€ä¹ˆæğŸ˜¶\n","date":"2022å¹´11æœˆ30æ—¥","permalink":"/categories/","section":"åˆ†ç±»ï¼Ÿ","summary":"æš‚æ—¶æ²¡æƒ³å¥½è¿™é‡Œè¦å†™ä»€ä¹ˆæğŸ˜¶","title":"åˆ†ç±»ï¼Ÿ"},{"content":"","date":"2022å¹´11æœˆ30æ—¥","permalink":"/","section":"å°å¼ çš„åšå®¢","summary":"","title":"å°å¼ çš„åšå®¢"},{"content":"è¿™é‡Œæ˜¯å…³äºç”Ÿæ´»çš„ä¸€äº›è®°å½•ğŸ˜Š\n","date":"2022å¹´11æœˆ30æ—¥","permalink":"/records/","section":"è®°å½•ç”Ÿæ´»","summary":"è¿™é‡Œæ˜¯å…³äºç”Ÿæ´»çš„ä¸€äº›è®°å½•ğŸ˜Š","title":"è®°å½•ç”Ÿæ´»"},{"content":"è¿™é‡Œæ˜¯æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è‡ªå·±çš„ä¸€äº›ç†è§£ï¼Œå¯èƒ½ç†è§£çš„ä¸æ˜¯å¾ˆåˆ°ä½ï¼Œä½†æ˜¯ä¹Ÿèƒ½æä¾›ä¸€äº›å‚è€ƒå§ğŸ™‡ğŸ»â€â™‚ï¸\n","date":"2022å¹´11æœˆ28æ—¥","permalink":"/articles/","section":"ä¸€äº›æ–‡ç« ","summary":"è¿™é‡Œæ˜¯æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è‡ªå·±çš„ä¸€äº›ç†è§£ï¼Œå¯èƒ½ç†è§£çš„ä¸æ˜¯å¾ˆåˆ°ä½ï¼Œä½†æ˜¯ä¹Ÿèƒ½æä¾›ä¸€äº›å‚è€ƒå§ğŸ™‡ğŸ»â€â™‚ï¸","title":"ä¸€äº›æ–‡ç« "},{"content":"NestJs æ˜¯ä»€ä¹ˆ #\ræˆ‘æˆªå–äº†éƒ¨åˆ†å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼Œç®€å•æ¥è¯´\nNestJSæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºé«˜æ•ˆã€å¯æ‰©å±•çš„ Node.js æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºçš„å¼€å‘æ¡†æ¶ã€‚ å®ƒåˆ©ç”¨ JavaScript çš„æ¸è¿›å¢å¼ºçš„èƒ½åŠ›ï¼Œä½¿ç”¨å¹¶å®Œå…¨æ”¯æŒ TypeScript ï¼ˆä»ç„¶å…è®¸å¼€å‘è€…ä½¿ç”¨çº¯ JavaScript è¿›è¡Œå¼€å‘ï¼‰ åœ¨åº•å±‚ï¼ŒNest æ„å»ºåœ¨å¼ºå¤§çš„ HTTP æœåŠ¡å™¨æ¡†æ¶ä¸Šï¼Œä¾‹å¦‚ Express ï¼ˆé»˜è®¤ï¼‰ï¼Œå¹¶ä¸”è¿˜å¯ä»¥é€šè¿‡é…ç½®ä»è€Œä½¿ç”¨ Fastify ï¼\nå•¦å“©å•¦å“©\n","date":"2022å¹´11æœˆ20æ—¥","permalink":"/articles/abouthugo/","section":"ä¸€äº›æ–‡ç« ","summary":"NestJs æ˜¯ä»€ä¹ˆ #\ræˆ‘æˆªå–äº†éƒ¨åˆ†å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼Œç®€å•æ¥è¯´","title":"NestJs"},{"content":" ç¬¬ä¸€æ¬¡å†™åšå®¢æœ‰ç‚¹ä¸çŸ¥æ‰€æªï¼Œéšä¾¿èŠèŠå§ğŸ˜‹ ä¹‹å‰è·Ÿç€å­¦Nestjsçš„æ—¶å€™è§†é¢‘é‡Œç”¨äº†prismaï¼Œå½“æ—¶å¬çš„ä¼¼æ‡‚éæ‡‚ï¼Œæ„Ÿè§‰Nestjså¥½ç”¨åˆä¸å¥½ç”¨ï¼ŒNestjsæ²¡è®°ä½å¤šå°‘ä½†æ˜¯è®°ä½äº†prismaï¼Œæ‰€ä»¥ç°åœ¨æƒ³ä»”ç»†å­¦ä¸€ä¸‹ æœ¬ç¯‡æ–‡ç« åªæ˜¯ä»‹ç»ä¸€ä¸‹prismaè¿æ¥æ•°æ®åº“ï¼ˆæˆ‘ç”¨çš„æ˜¯mysqlï¼‰ä»¥åŠä¸€äº›ç®€å•çš„æ“ä½œï¼ˆå¤æ‚çš„æˆ‘æš‚æ—¶è¿˜ç”¨ä¸ä¸Šï¼‰ï¼Œæ‰€ä»¥å¦‚æœæœ‰è®²çš„ä¸å¥½çš„è¯·å¤šå¤šè§è°…ğŸ¤§\næ³¨æ„ æœ¬æ•™ç¨‹éœ€è¦å®‰è£…Node.jsï¼ˆ12.2åŠä»¥ä¸Šï¼‰\r1.å®‰è£…Prisma #\rå…ˆå»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹,è¿™é‡Œæˆ‘å°±å»ºç«‹ä¸€ä¸ªå«åšprisma-mysqlçš„æ–‡ä»¶å¤¹\nmkdir prisma-mysql cd prisma-mysql\rç„¶åæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸‹å¹¶æ·»åŠ ä¾èµ–\nnpm init -y\rnpm i prisma -D\rç°åœ¨æˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨Prisma CLIäº†ï¼Œé€šè¿‡å‰ç¼€npxæ¥è°ƒç”¨Prisma CLI:\nnpx prisma\ré€šè¿‡ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºPrisma schemaæ–‡ä»¶æ¥è®¾ç½®Prismaé¡¹ç›®\nnpx prisma init\rè¿™ä¸ªPrisma schemaæ˜¯ä»€ä¹ˆå‘¢ å’±ä»¬ä½¿ç”¨ npx prisma init ä¼šå»ºç«‹ä¸€ä¸ªåä¸ºprismaçš„æ–°ç›®å½•ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªåä¸ºschema.prismaçš„æ–‡ä»¶å’Œä¸€ä¸ªä½äºé¡¹ç›®æ ¹ç›®å½•ä¸­çš„.envæ–‡ä»¶ schema.prismaä¸­åŒ…å«äº†prismaæ¨¡å¼ï¼Œç®€å•æ¥è¯´å°±æ˜¯è¿æ¥ä»€ä¹ˆæ•°æ®åº“ï¼Œè¿˜æœ‰prismaå®¢æˆ·ç«¯ç”Ÿæˆå™¨ï¼Œè¿™ä¸ªæˆ‘è§‰å¾—ä¸ç”¨äº†è§£ï¼ŒçŸ¥é“å°±å¥½ğŸ˜ .envæ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰ç¯å¢ƒå˜é‡çš„æ–‡ä»¶ï¼ˆç”¨äºæ•°æ®åº“è¿æ¥ï¼‰ã€‚\n2.è¿æ¥æ•°æ®åº“ #\rprisma/schema.prisma #\rdatasource db {\rprovider = \u0026quot;postgresql\u0026quot;\rurl = env(\u0026quot;DATABASE_URL\u0026quot;)\r}\rå—¯ï¼Œè¿™å°±æ˜¯ä½ åº”è¯¥åœ¨schema.prismaä¸­åº”è¯¥çœ‹åˆ°çš„ä¸œè¥¿ğŸ§ï¼Œå› ä¸ºprismaé»˜è®¤ä½¿ç”¨çš„æ˜¯postgresqlï¼Œæ‰€ä»¥åˆšåˆšä½ ç”¨çš„initå‘½ä»¤å°±å»ºç«‹äº†postgresqlçš„è¿æ¥ï¼Œç°åœ¨æˆ‘ä»¬æŠŠå®ƒæ”¹æˆmysqlçš„è¿æ¥\ndatasource db {\rprovider = \u0026quot;mysql\u0026quot;\rurl = env(\u0026quot;DATABASE_URL\u0026quot;)\r}\ræ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯è¿˜æŒºç®€å•çš„\nä¸‹é¢æˆ‘ä»¬è®¾ç½®ä¸€ä¸‹è¿™ä¸ªDATABASE_URLï¼Œå¦‚æœä½ å·²ç»çœ‹è¿‡äº†.envæ–‡ä»¶ï¼Œé‚£ä½ åº”è¯¥å¯¹è¿™ä¸ªä¸œè¥¿ä¸æ˜¯å¾ˆé™Œç”Ÿã€‚è¦è¿æ¥mysqlæ•°æ®åº“ï¼Œè¿™ä¸ªurlçš„ç»“æ„åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­çš„\nmysql://Username:Password@Host:Port/Database\ræœ¬åœ°è¿è¡Œæ—¶ï¼Œä½ çš„URLé€šå¸¸æ˜¯è¿™ä¸ªæ ·å­çš„\nDATABASE_URL=\u0026quot;mysql://root:randompassword@localhost:3306/mydb\u0026quot;\r3.åˆ›å»ºè¡¨å• #\ræ¥ä¸‹æ¥æˆ‘ä»¬å»ºä¸€äº›è¡¨ç©ä¸€ä¸‹è¿™ä¸ªprismaï¼Œå°±ç”¨å®˜æ–¹ç»™å‡ºçš„ä¾‹å­å§\nprisma/schema.prisma #\rmodel Post {\rid Int @id @default(autoincrement())\rcreatedAt DateTime @default(now())\rupdatedAt DateTime @updatedAt\rtitle String @db.VarChar(255)\rcontent String?\rpublished Boolean @default(false)\rauthor User @relation(fields: [authorId], references: [id])\rauthorId Int\r}\rmodel Profile {\rid Int @id @default(autoincrement())\rbio String?\ruser User @relation(fields: [userId], references: [id])\ruserId Int @unique\r}\rmodel User {\rid Int @id @default(autoincrement())\remail String @unique\rname String?\rposts Post[]\rprofile Profile?\r}\rè¿™äº›æ•°æ®æ¨¡å‹éœ€è¦æ˜ å°„åˆ°æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨prisma migrateCLIå‘½ä»¤\nnpx prisma migrate dev --name init\rè¿™ä¸ªnameä½ å¯ä»¥è‡ªå·±å–ï¼Œå®ƒç”¨äºç»™ä½ è¿™æ¬¡çš„è®°å½•å‘½å ç°åœ¨æˆ‘ä»¬çš„è¡¨å•ä¹Ÿåˆ›å»ºå¥½äº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±è¦å¾€è¡¨é‡Œæ·»åŠ æ•°æ®å¹¶è¿›è¡Œæ“ä½œäº†ï¼ğŸ˜‹\n4.æ·»åŠ æ•°æ®å¹¶è¿›è¡Œæ“ä½œï¼ #\rè¦å¼€å§‹ä½¿ç”¨Prisma Clientï¼Œä½ éœ€è¦å®‰è£…@prisma/clientåŒ…\nnpm install @prisma/client\rå®‰è£…å‘½ä»¤ä¼šè‡ªåŠ¨è°ƒç”¨prisma generateï¼Œå®ƒä¼šè¯»å–prismaæ¨¡å¼å¹¶ç”Ÿæˆä¸€ä¸ªé€‚åˆæ‚¨çš„æ¨¡å‹çš„prisma Clientç‰ˆæœ¬ã€‚\nè¿™ä¸ªgenerateå‘½ä»¤å˜›ï¼Œå®˜æ–¹çš„è§£é‡Šæˆ‘è¿˜ä¸æ˜¯å¾ˆæ‡‚ï¼Œä¸è¿‡ç”¨æˆ‘çš„ç†è§£æ¥è®²ï¼ˆæ¯”è¾ƒæµ…æ˜¾ï¼‰ï¼Œå°±æ˜¯å®ƒä¼šæ ¹æ®ä½ åœ¨schema.prismaæ–‡ä»¶é‡Œçš„æ¨¡å‹å»æ•°æ®åº“é‡Œç”Ÿæˆå¯¹åº”çš„è¡¨ï¼Œæœ‰æ—¶é—´æˆ‘å†å»çœ‹çœ‹å§ğŸ¤£\nä¸‹é¢æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸­å»ºç«‹ä¸€ä¸ªindex.jsæ–‡ä»¶\nindex.js #\rconst { PrismaClient } = require('@prisma/client')\rconst prisma = new PrismaClient()\rasync function main() {\rconst allUsers = await prisma.user.findMany()\rconsole.log(allUsers)\r}\rmain()\r.catch((e) =\u0026gt; {\rthrow e\r})\r.finally(async () =\u0026gt; {\rawait prisma.$disconnect()\r})\ræ¥ç€æˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\nnode index.js\rç»“æœåº”è¯¥æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬æ²¡æœ‰æ·»åŠ æ•°æ®å˜›\næˆ‘ä»¬åœ¨åŸæœ‰çš„åŸºç¡€ä¸ŠåŠ ä¸Šä¸€äº›ä»£ç \nawait prisma.user.create({\rdata: {\rname: 'Alice',\remail: 'alice@prisma.io',\rposts: {\rcreate: { title: 'Hello World' },\r},\rprofile: {\rcreate: { bio: 'I like turtles' },\r},\r},\r})\rè¿™å°±æ˜¯æ·»åŠ æ•°æ®çš„æ“ä½œ\nå®Œæ•´ç‰ˆï¼š #\rasync function main() {\rawait prisma.user.create({\rdata: {\rname: 'Alice',\remail: 'alice@prisma.io',\rposts: {\rcreate: { title: 'Hello World' },\r},\rprofile: {\rcreate: { bio: 'I like turtles' },\r},\r},\r})\rconst allUsers = await prisma.user.findMany({\rinclude: {\rposts: true,\rprofile: true,\r},\r})\rconsole.dir(allUsers, { depth: null })\r}\ræˆ‘ä»¬çœ‹åˆ°çš„ç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n[\r{\remail: 'alice@prisma.io',\rid: 1,\rname: 'Alice',\rposts: [\r{\rcontent: null,\rcreatedAt: 2020-03-21T16:45:01.246Z,\rid: 1,\rpublished: false,\rtitle: 'Hello World',\rauthorId: 1,\r}\r],\rprofile: {\rbio: 'I like turtles',\rid: 1,\ruserId: 1,\r}\r}\r]\ræŸ¥çœ‹æ•°æ®åº“åº”è¯¥ä¹Ÿèƒ½çœ‹åˆ°æˆ‘ä»¬æ·»åŠ äº†ç›¸å¯¹åº”çš„æ•°æ®\nä¸‹é¢å†çœ‹çœ‹ä¿®æ”¹çš„æ“ä½œ\nasync function main() {\rconst post = await prisma.post.update({\rwhere: { id: 1 },\rdata: { published: true },\r})\rconsole.log(post)\r}\rä½ å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡º\n{\rid: 1,\rtitle: 'Hello World',\rcontent: null,\rpublished: true,\rauthorId: 1\r}\ræ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰prismaè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ğŸ˜Š\n5.åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æ•°æ®åº“ #\rå½“æ—¶è®©æˆ‘å°è±¡æœ€æ·±åˆ»çš„è¿˜æ˜¯prismaçš„è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒå¯ä»¥åœ¨æµè§ˆå™¨ä¸­çœ‹æ•°æ®åº“è€¶ï¼\nä½ åªè¦åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤\nnpx prisma studio\rå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ä½ çš„æ•°æ®åº“ï¼Œå¯ä»¥åœ¨è¡¨ä¸­è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æ“ä½œï¼Œå¾ˆæ–¹ä¾¿ä¸æ˜¯å—ï¼Ÿ\nå…³äºprismaè¿æ¥mysqlçš„ç®€å•æ“ä½œåº”ç”¨å°±åˆ°è¿™é‡Œäº†ï¼Œè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œç¬¬ä¸€æ¬¡å†™åšå®¢æ„Ÿè§‰èŠ±äº†å¥½å¤šæ—¶é—´ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æŒºå¼€å¿ƒçš„ï¼Œå¸Œæœ›ä»¥åå¯ä»¥åšæŒä¸‹å»ï¼Œå’Œä½ ä»¬åˆ†äº«å­¦åˆ°çš„ä¸œè¥¿å’Œæˆ‘çš„ç†è§£ğŸ¥³\n","date":"2022å¹´11æœˆ20æ—¥","permalink":"/articles/prisma-mysql/","section":"ä¸€äº›æ–‡ç« ","summary":"ç¬¬ä¸€æ¬¡å†™åšå®¢æœ‰ç‚¹ä¸çŸ¥æ‰€æªï¼Œéšä¾¿èŠèŠå§ğŸ˜‹ ä¹‹å‰è·Ÿç€å­¦Nestjsçš„æ—¶å€™è§†é¢‘é‡Œç”¨äº†prismaï¼Œå½“æ—¶å¬çš„ä¼¼æ‡‚éæ‡‚ï¼Œæ„Ÿè§‰Nestjså¥½ç”¨åˆä¸å¥½ç”¨ï¼ŒNestjsæ²¡è®°ä½å¤šå°‘ä½†æ˜¯è®°ä½äº†prismaï¼Œæ‰€ä»¥ç°åœ¨æƒ³ä»”ç»†å­¦ä¸€ä¸‹ æœ¬ç¯‡æ–‡ç« åªæ˜¯ä»‹ç»ä¸€ä¸‹prismaè¿æ¥æ•°æ®åº“ï¼ˆæˆ‘ç”¨çš„æ˜¯mysqlï¼‰ä»¥åŠä¸€äº›ç®€å•çš„æ“ä½œï¼ˆå¤æ‚çš„æˆ‘æš‚æ—¶è¿˜ç”¨ä¸ä¸Šï¼‰ï¼Œæ‰€ä»¥å¦‚æœæœ‰è®²çš„ä¸å¥½çš„è¯·å¤šå¤šè§è°…ğŸ¤§","title":"ä½¿ç”¨Prismaè¿æ¥mysql"},{"content":"","date":"0001å¹´01æœˆ01æ—¥","permalink":"/tags/","section":"Tags","summary":"","title":"Tags"}]