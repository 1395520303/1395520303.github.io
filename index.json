[{"content":"","date":"2022å¹´12æœˆ01æ—¥","permalink":"/","section":"demigodZhangçš„åšå®¢","summary":"","title":"demigodZhangçš„åšå®¢"},{"content":"è¿™é‡Œä¼šæ˜¯æˆ‘çš„ä¸€äº›åˆ†äº«ğŸ’•\n","date":"2022å¹´12æœˆ01æ—¥","permalink":"/records/","section":"åˆ†äº«","summary":"è¿™é‡Œä¼šæ˜¯æˆ‘çš„ä¸€äº›åˆ†äº«ğŸ’•","title":"åˆ†äº«"},{"content":"è¿™é‡Œæ˜¯æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è‡ªå·±çš„ä¸€äº›ç†è§£ï¼Œå¯èƒ½ç†è§£çš„ä¸æ˜¯å¾ˆåˆ°ä½ï¼Œä½†æ˜¯ä¹Ÿèƒ½æä¾›ä¸€äº›å‚è€ƒå§ğŸ™‡ğŸ»â€â™‚ï¸\n","date":"2022å¹´11æœˆ28æ—¥","permalink":"/articles/","section":"ä¸€äº›æ–‡ç« ","summary":"è¿™é‡Œæ˜¯æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è‡ªå·±çš„ä¸€äº›ç†è§£ï¼Œå¯èƒ½ç†è§£çš„ä¸æ˜¯å¾ˆåˆ°ä½ï¼Œä½†æ˜¯ä¹Ÿèƒ½æä¾›ä¸€äº›å‚è€ƒå§ğŸ™‡ğŸ»â€â™‚ï¸","title":"ä¸€äº›æ–‡ç« "},{"content":"Controllers #\rcontroller ç”¨æ¥å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”\næˆ‘ä»¬å¯ä»¥ç”¨ CLI æä¾›çš„å¿«æ·å‘½ä»¤nest g co name(name æ˜¯æ§åˆ¶å™¨çš„åå­—)ç”Ÿæˆä¸€ä¸ª controller çœ‹ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨nest g co coffeesç”Ÿæˆä¸€ä¸ªå…³äºå’–å•¡çš„æ§åˆ¶å™¨ Tips ä½ å¯ä»¥åœ¨ç”Ÿæˆæ§åˆ¶å™¨æ—¶å¸¦ä¸Š\u0026ndash;no-spec å‚æ•°å–æ¶ˆç”Ÿæˆæµ‹è¯•æ–‡ä»¶\rimport { Controller } from '@nestjs/common';\r@Controller('coffees')\rexport class CoffeesController {}\ræ§åˆ¶å™¨ç”¨@Controller ä¿®é¥°ç¬¦åŒ…è£¹ï¼Œå¯ä»¥çœ‹åˆ°æ‹¬å·ä¸­å¸¦æœ‰â€˜coffeesâ€™çš„å‚æ•°ã€‚è¿™æ„å‘³ç€å½“æˆ‘ä»¬å‘èµ·çš„è¯·æ±‚ä¸º http://localhost:3000/coffees æ—¶(nest é»˜è®¤çš„è¯·æ±‚åœ°å€ä¸º localhost çš„ 3000 ç«¯å£)è¿™ä¸ªæ§åˆ¶å™¨å°±å¯ä»¥æ•è·åˆ°ã€‚ æˆ‘ä»¬æ¥å†™ä¸€ä¸ª get è¯·æ±‚æµ‹è¯•ä¸€ä¸‹\nimport { Controller, Get } from '@nestjs/common';\r@Controller('coffees')\rexport class CoffeesController {\r@Get\rfindAll(){\rreturn \u0026quot;this function returns all coffees\u0026quot;\r}\r}\rTips ä¸è¦å¿˜è®°ä»@nestjs/common ä¸­å¯¼å…¥ Get\ræˆ‘ä»¬ä½¿ç”¨yarn startå¯åŠ¨ nestï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ Apifoxï¼Œä½ å¯ä»¥ä½¿ç”¨å…¶ä»–çš„å·¥å…·æ¥å‘èµ·è¯·æ±‚\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨è¿”å›äº†æˆ‘ä»¬æƒ³è¦çš„ç»“æœ\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¹‹å‰çš„ä»£ç æ˜¯ä»€ä¹ˆæ„æ€ @Get ä¿®é¥°ç¬¦ä»£è¡¨æˆ‘ä»¬å¤„ç†çš„è¯·æ±‚ä¸º get æ–¹æ³•ã€‚ é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³è¦å¤„ç† post è¯·æ±‚å°±æ˜¯ç”¨@Post å’¯ @Get ä¸‹é¢ç´§æ¥çš„å°±æ˜¯æˆ‘ä»¬æƒ³è¦å¤„ç†è¯·æ±‚è¿”å›ç»“æœçš„æ–¹æ³•ï¼Œæ–¹æ³•çš„åå­—æœ€å¥½å…·æœ‰è§£é‡Šæ„ä¹‰ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å°±ç”¨äº†ä¸€ä¸ªå«åš findAll çš„æ–¹æ³•ç”¨æ¥è¿”å›æ‰€æœ‰çš„ coffees\nä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç» nest ä¸ºæˆ‘ä»¬æä¾›çš„æå–å‚æ•°çš„æ–¹æ³•,ä¸‹é¢æˆ‘ä¼šä»‹ç»@Param å’Œ @Body,å…¶ä»–çš„å¯ä»¥å‚è€ƒNest-Controllerså®˜æ–¹æ–‡æ¡£\nimport { Body, Controller, Get, Param, Post } from '@nestjs/common';\r@Controller('coffees')\rexport class CoffeesController {\r@Get()\rfindAll() {\rreturn 'this function returns all coffees';\r}\r@Get(\u0026quot;:id\u0026quot;)\rfindOne(@Param(\u0026quot;id\u0026quot;) id:string):string{\rreturn `this function returns id: ${id} coffee`\r}\r@Post()\rcreate(@Body() body):object{\rreturn body\r}\r}\rTips ä¸è¦å¿˜è®°ä»@nestjs/common ä¸­å¯¼å…¥ç›¸åº”çš„æ–¹æ³•\rå…ˆæ¥çœ‹çœ‹@Param ä¿®é¥°ç¬¦å§ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸€æ¬¡çš„@Get ä¿®é¥°ç¬¦åæºå¸¦äº†å‚æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‚æ•°æ˜¯ä»¥ : å¼€å¤´çš„ï¼Œç†Ÿæ‚‰ç½‘ç»œè¯·æ±‚çš„å°ä¼™ä¼´åº”è¯¥ä¸é™Œç”Ÿï¼Œè¿™ä¸ªå°±æ˜¯ params å‚æ•°å•Šã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨è¯·æ±‚çš„åœ°å€åæºå¸¦æˆ‘ä»¬æƒ³è¦ä¼ é€’çš„ params å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ª id å‚æ•°ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬çš„è¯·æ±‚ä¸º localhost:3000/coffees/3 çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šçš„ parmas å‚æ•°åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n{\r\u0026quot;id\u0026quot;: \u0026quot;2323\u0026quot;\r}\rå½“æˆ‘ä»¬ä¼ é€’å¤šä¸ª params å‚æ•°æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ @Param ä¿®é¥°ç¬¦é‡Œæºå¸¦å‚æ•°æå–æˆ‘ä»¬æƒ³è¦çš„å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å°±æå–äº†è¿™ä¸ª id å‚æ•°å¹¶ä¸”å°†å®ƒå‘½åä¸º id ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨è¿”å›å“åº”çš„æ—¶å€™å°±å¯ä»¥ç”¨å®ƒäº†ã€‚\nç›¸åŒåœ°ï¼Œ@Body å¯¹åº”çš„æ˜¯è¯·æ±‚æºå¸¦çš„ body å‚æ•°ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ@Body ä¿®é¥°ç¬¦é‡Œä¹Ÿå¯ä»¥æºå¸¦å‚æ•°å“¦ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨@Body(\u0026ldquo;name\u0026rdquo;)å¯ä»¥æå– body ä¸­å¯¹åº”çš„ name å±æ€§ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·åšï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬åªè®¿é—®ç‰¹å®šçš„å±æ€§ï¼ŒéªŒè¯(validation)ä¼šè·³è¿‡å…¶ä»–çš„å±æ€§ï¼Œè¿™å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜(éªŒè¯æŒ‡çš„æ˜¯å®ˆå«(Guards)å’Œç®¡é“(Pipes)çš„åŠŸèƒ½,è¿™é‡Œæš‚ä¸”ä¸å»ä»‹ç»)\næœ‰æ—¶å€™æˆ‘ä»¬æƒ³è¦å»è®¾å®šè¿”å›çš„çŠ¶æ€ç ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿè¿™æ—¶æˆ‘ä»¬å°±è¦è¯·å‡º@HttpCode ä¿®é¥°ç¬¦äº†ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æƒ³è¦æ”¹å˜çŠ¶æ€ç çš„è¯·æ±‚å¤„åŠ ä¸Š@HttpCode å³å¯ã€‚ ä¾‹å¦‚æˆ‘ä»¬æƒ³å°†ä¸Šé¢çš„ Get è¯·æ±‚çŠ¶æ€ç æ”¹ä¸º 410,å°±å¯ä»¥è¿™æ ·åš\n@HttpCode(410)\r@Get(\u0026quot;:id\u0026quot;)\rfindOne(@Param(\u0026quot;id\u0026quot;) id:string):string{\rreturn `this function returns id: ${id} coffee`\r}\rTips ä¿®é¥°ç¬¦å†™åœ¨@Get çš„ä¸Šæ–¹è¿˜æ˜¯ä¸‹æ–¹éƒ½å¯ä»¥\ré‚£å¦‚æœè§‰å¾—çŠ¶æ€ç å¤ªéš¾è®°äº†æ€ä¹ˆåŠï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ HttpStatus æ¥å®šä¹‰çŠ¶æ€ç  æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ ğŸ˜Š\nProviders \u0026amp;\u0026amp; Services #\rè¿™é‡Œæˆ‘æœ¬æ¥æƒ³ç”¨servicesæ¥åšæ ‡é¢˜ï¼Œå› ä¸ºæˆ‘æƒ³è®²çš„å°±æ˜¯servicesï¼Œä½†æ˜¯å®˜æ–¹æŠŠservicesæ”¾è¿›äº†Providersé‡Œï¼Œå› ä¸ºProvidersä¹Ÿæ˜¯Nesté‡Œä¸€ä¸ªå¾ˆåŸºç¡€çš„æ¦‚å¿µï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå°±å†™Providers \u0026amp;\u0026amp; Serviceså§ã€‚\nServicesä¸»è¦æ˜¯è´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ä»¥åŠè¿æ¥æ•°æ®æºã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬åœ¨è¿™é‡Œå†™æ–¹æ³•ï¼Œç„¶ååœ¨controlleré‡Œç›´æ¥è°ƒç”¨æ–¹æ³•ã€‚æˆ‘ä»¬ç›´æ¥å…ˆæ¥ç”Ÿæˆä¸€ä¸ªserviceçœ‹ä¸€ä¸‹ï¼š æˆ‘ä»¬ä½¿ç”¨nest g s coffeesç”Ÿæˆcoffeesçš„service\nimport { Injectable } from '@nestjs/common';\r@Injectable()\rexport class CoffeesService {}\rè¿™å°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„serviceï¼Œç”¨äº†@Injectableä¿®é¥°ç¬¦ï¼ŒemmğŸ§è¿™ä¸ªå°±æ¶‰åŠåˆ°Providerçš„æ¦‚å¿µäº†ï¼Œæ˜¯ä¸€ä¸ªæ³¨å…¥ä¾èµ–çš„æ¦‚å¿µï¼Œè¿˜æœ‰ç®¡é“ï¼Œå®ˆå«ç­‰ç­‰éƒ½ä¼šç”¨åˆ°è¿™ä¸ª@Injectableä¿®é¥°ç¬¦ï¼Œå®˜æ–¹è¯´è¿™æ˜¯Angularä¸­çš„æ¦‚å¿µï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ç³»ç»Ÿåœ°å­¦è¿‡Angularï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å…ˆè·³è¿‡å§ã€‚\nè¦æ³¨å…¥ä¾èµ–æˆ‘ä»¬éœ€è¦åœ¨ä¹‹å‰åˆ›å»ºçš„controllerä¸­ä½¿ç”¨æ„é€ å‡½æ•°\n@Controller('coffees')\rexport class CoffeesController {\rconstructor(private readonly coffeeService: CoffeesService) {}\r@Get()\r```\råƒæ˜¯è¿™æ ·ï¼Œnestå°±ä¼šä¸ºæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªcoffeeServiceçš„å®ä¾‹æˆ–è€…è°ƒç”¨å·²ç»å­˜åœ¨çš„å®ä¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨coffeeServiceé‡Œçš„ä¸œè¥¿äº†\næˆ‘ä»¬ä¸ºcoffeeså»ºä¸€ä¸ªå®ä½“ç±»å‹\ncoffee.entity.ts\nexport class Coffee{\rid:number;\rname:string;\rbrand:string;\rflavors:string[]\r}\rç„¶åæˆ‘ä»¬å»coffeeServiceä¸­å†™æ­»ä¸€äº›æ•°æ®å¹¶æ·»åŠ ä¸€ä¸ªfindAllæ–¹æ³•\nimport { Injectable } from '@nestjs/common';\rimport { Coffee } from './entities/coffee.entity';\r@Injectable()\rexport class CoffeesService {\rprivate coffees: Coffee[] = [\r{\rid: 1,\rname: 'Shipwreck Roast',\rbrand: 'buddy Brew',\rflavors: ['chocolate', 'vanilla'],\r},\r];\rfindAll() {\rreturn this.coffees;\r}\r}\rå»coffee.Controlleré‡Œæ”¹å†™ä¹‹å‰çš„findAllæ–¹æ³•\n@Get()\rfindAll(): Array\u0026lt;Coffee\u0026gt; {\rreturn this.coffeeService.findAll();\r}\rç°åœ¨æˆ‘ä»¬é‡æ–°å‘èµ·è¯·æ±‚ï¼Œä¼šå¾—åˆ°ä»¥ä¸‹çš„ç»“æœ å…¶å®ä¹Ÿä¸éš¾ï¼Œå¯¹å§ğŸ˜\n","date":"2022å¹´11æœˆ20æ—¥","permalink":"/articles/nestjs/","section":"ä¸€äº›æ–‡ç« ","summary":"å…³äºNestJsçš„ä¸€äº›ç®€å•ä½¿ç”¨","title":"NestJs"},{"content":" ç¬¬ä¸€æ¬¡å†™åšå®¢æœ‰ç‚¹ä¸çŸ¥æ‰€æªï¼Œéšä¾¿èŠèŠå§ğŸ˜‹ ä¹‹å‰è·Ÿç€å­¦Nestjsçš„æ—¶å€™è§†é¢‘é‡Œç”¨äº†prismaï¼Œå½“æ—¶å¬çš„ä¼¼æ‡‚éæ‡‚ï¼Œæ„Ÿè§‰Nestjså¥½ç”¨åˆä¸å¥½ç”¨ï¼ŒNestjsæ²¡è®°ä½å¤šå°‘ä½†æ˜¯è®°ä½äº†prismaï¼Œæ‰€ä»¥ç°åœ¨æƒ³ä»”ç»†å­¦ä¸€ä¸‹ æœ¬ç¯‡æ–‡ç« åªæ˜¯ä»‹ç»ä¸€ä¸‹prismaè¿æ¥æ•°æ®åº“ï¼ˆæˆ‘ç”¨çš„æ˜¯mysqlï¼‰ä»¥åŠä¸€äº›ç®€å•çš„æ“ä½œï¼ˆå¤æ‚çš„æˆ‘æš‚æ—¶è¿˜ç”¨ä¸ä¸Šï¼‰ï¼Œæ‰€ä»¥å¦‚æœæœ‰è®²çš„ä¸å¥½çš„è¯·å¤šå¤šè§è°…ğŸ¤§\næ³¨æ„ æœ¬æ•™ç¨‹éœ€è¦å®‰è£…Node.jsï¼ˆ12.2åŠä»¥ä¸Šï¼‰\r1.å®‰è£…Prisma #\rå…ˆå»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹,è¿™é‡Œæˆ‘å°±å»ºç«‹ä¸€ä¸ªå«åšprisma-mysqlçš„æ–‡ä»¶å¤¹\nmkdir prisma-mysql cd prisma-mysql\rç„¶åæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸‹å¹¶æ·»åŠ ä¾èµ–\nnpm init -y\rnpm i prisma -D\rç°åœ¨æˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨Prisma CLIäº†ï¼Œé€šè¿‡å‰ç¼€npxæ¥è°ƒç”¨Prisma CLI:\nnpx prisma\ré€šè¿‡ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºPrisma schemaæ–‡ä»¶æ¥è®¾ç½®Prismaé¡¹ç›®\nnpx prisma init\rè¿™ä¸ªPrisma schemaæ˜¯ä»€ä¹ˆå‘¢ å’±ä»¬ä½¿ç”¨ npx prisma init ä¼šå»ºç«‹ä¸€ä¸ªåä¸ºprismaçš„æ–°ç›®å½•ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªåä¸ºschema.prismaçš„æ–‡ä»¶å’Œä¸€ä¸ªä½äºé¡¹ç›®æ ¹ç›®å½•ä¸­çš„.envæ–‡ä»¶ schema.prismaä¸­åŒ…å«äº†prismaæ¨¡å¼ï¼Œç®€å•æ¥è¯´å°±æ˜¯è¿æ¥ä»€ä¹ˆæ•°æ®åº“ï¼Œè¿˜æœ‰prismaå®¢æˆ·ç«¯ç”Ÿæˆå™¨ï¼Œè¿™ä¸ªæˆ‘è§‰å¾—ä¸ç”¨äº†è§£ï¼ŒçŸ¥é“å°±å¥½ğŸ˜ .envæ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰ç¯å¢ƒå˜é‡çš„æ–‡ä»¶ï¼ˆç”¨äºæ•°æ®åº“è¿æ¥ï¼‰ã€‚\n2.è¿æ¥æ•°æ®åº“ #\rprisma/schema.prisma #\rdatasource db {\rprovider = \u0026quot;postgresql\u0026quot;\rurl = env(\u0026quot;DATABASE_URL\u0026quot;)\r}\rå—¯ï¼Œè¿™å°±æ˜¯ä½ åº”è¯¥åœ¨schema.prismaä¸­åº”è¯¥çœ‹åˆ°çš„ä¸œè¥¿ğŸ§ï¼Œå› ä¸ºprismaé»˜è®¤ä½¿ç”¨çš„æ˜¯postgresqlï¼Œæ‰€ä»¥åˆšåˆšä½ ç”¨çš„initå‘½ä»¤å°±å»ºç«‹äº†postgresqlçš„è¿æ¥ï¼Œç°åœ¨æˆ‘ä»¬æŠŠå®ƒæ”¹æˆmysqlçš„è¿æ¥\ndatasource db {\rprovider = \u0026quot;mysql\u0026quot;\rurl = env(\u0026quot;DATABASE_URL\u0026quot;)\r}\ræ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯è¿˜æŒºç®€å•çš„\nä¸‹é¢æˆ‘ä»¬è®¾ç½®ä¸€ä¸‹è¿™ä¸ªDATABASE_URLï¼Œå¦‚æœä½ å·²ç»çœ‹è¿‡äº†.envæ–‡ä»¶ï¼Œé‚£ä½ åº”è¯¥å¯¹è¿™ä¸ªä¸œè¥¿ä¸æ˜¯å¾ˆé™Œç”Ÿã€‚è¦è¿æ¥mysqlæ•°æ®åº“ï¼Œè¿™ä¸ªurlçš„ç»“æ„åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­çš„\nmysql://Username:Password@Host:Port/Database\ræœ¬åœ°è¿è¡Œæ—¶ï¼Œä½ çš„URLé€šå¸¸æ˜¯è¿™ä¸ªæ ·å­çš„\nDATABASE_URL=\u0026quot;mysql://root:randompassword@localhost:3306/mydb\u0026quot;\r3.åˆ›å»ºè¡¨å• #\ræ¥ä¸‹æ¥æˆ‘ä»¬å»ºä¸€äº›è¡¨ç©ä¸€ä¸‹è¿™ä¸ªprismaï¼Œå°±ç”¨å®˜æ–¹ç»™å‡ºçš„ä¾‹å­å§\nprisma/schema.prisma #\rmodel Post {\rid Int @id @default(autoincrement())\rcreatedAt DateTime @default(now())\rupdatedAt DateTime @updatedAt\rtitle String @db.VarChar(255)\rcontent String?\rpublished Boolean @default(false)\rauthor User @relation(fields: [authorId], references: [id])\rauthorId Int\r}\rmodel Profile {\rid Int @id @default(autoincrement())\rbio String?\ruser User @relation(fields: [userId], references: [id])\ruserId Int @unique\r}\rmodel User {\rid Int @id @default(autoincrement())\remail String @unique\rname String?\rposts Post[]\rprofile Profile?\r}\rè¿™äº›æ•°æ®æ¨¡å‹éœ€è¦æ˜ å°„åˆ°æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨prisma migrateCLIå‘½ä»¤\nnpx prisma migrate dev --name init\rè¿™ä¸ªnameä½ å¯ä»¥è‡ªå·±å–ï¼Œå®ƒç”¨äºç»™ä½ è¿™æ¬¡çš„è®°å½•å‘½å ç°åœ¨æˆ‘ä»¬çš„è¡¨å•ä¹Ÿåˆ›å»ºå¥½äº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±è¦å¾€è¡¨é‡Œæ·»åŠ æ•°æ®å¹¶è¿›è¡Œæ“ä½œäº†ï¼ğŸ˜‹\n4.æ·»åŠ æ•°æ®å¹¶è¿›è¡Œæ“ä½œï¼ #\rè¦å¼€å§‹ä½¿ç”¨Prisma Clientï¼Œä½ éœ€è¦å®‰è£…@prisma/clientåŒ…\nnpm install @prisma/client\rå®‰è£…å‘½ä»¤ä¼šè‡ªåŠ¨è°ƒç”¨prisma generateï¼Œå®ƒä¼šè¯»å–prismaæ¨¡å¼å¹¶ç”Ÿæˆä¸€ä¸ªé€‚åˆæ‚¨çš„æ¨¡å‹çš„prisma Clientç‰ˆæœ¬ã€‚\nè¿™ä¸ªgenerateå‘½ä»¤å˜›ï¼Œå®˜æ–¹çš„è§£é‡Šæˆ‘è¿˜ä¸æ˜¯å¾ˆæ‡‚ï¼Œä¸è¿‡ç”¨æˆ‘çš„ç†è§£æ¥è®²ï¼ˆæ¯”è¾ƒæµ…æ˜¾ï¼‰ï¼Œå°±æ˜¯å®ƒä¼šæ ¹æ®ä½ åœ¨schema.prismaæ–‡ä»¶é‡Œçš„æ¨¡å‹å»æ•°æ®åº“é‡Œç”Ÿæˆå¯¹åº”çš„è¡¨ï¼Œæœ‰æ—¶é—´æˆ‘å†å»çœ‹çœ‹å§ğŸ¤£\nä¸‹é¢æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸­å»ºç«‹ä¸€ä¸ªindex.jsæ–‡ä»¶\nindex.js #\rconst { PrismaClient } = require('@prisma/client')\rconst prisma = new PrismaClient()\rasync function main() {\rconst allUsers = await prisma.user.findMany()\rconsole.log(allUsers)\r}\rmain()\r.catch((e) =\u0026gt; {\rthrow e\r})\r.finally(async () =\u0026gt; {\rawait prisma.$disconnect()\r})\ræ¥ç€æˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\nnode index.js\rç»“æœåº”è¯¥æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬æ²¡æœ‰æ·»åŠ æ•°æ®å˜›\næˆ‘ä»¬åœ¨åŸæœ‰çš„åŸºç¡€ä¸ŠåŠ ä¸Šä¸€äº›ä»£ç \nawait prisma.user.create({\rdata: {\rname: 'Alice',\remail: 'alice@prisma.io',\rposts: {\rcreate: { title: 'Hello World' },\r},\rprofile: {\rcreate: { bio: 'I like turtles' },\r},\r},\r})\rè¿™å°±æ˜¯æ·»åŠ æ•°æ®çš„æ“ä½œ\nå®Œæ•´ç‰ˆï¼š #\rasync function main() {\rawait prisma.user.create({\rdata: {\rname: 'Alice',\remail: 'alice@prisma.io',\rposts: {\rcreate: { title: 'Hello World' },\r},\rprofile: {\rcreate: { bio: 'I like turtles' },\r},\r},\r})\rconst allUsers = await prisma.user.findMany({\rinclude: {\rposts: true,\rprofile: true,\r},\r})\rconsole.dir(allUsers, { depth: null })\r}\ræˆ‘ä»¬çœ‹åˆ°çš„ç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n[\r{\remail: 'alice@prisma.io',\rid: 1,\rname: 'Alice',\rposts: [\r{\rcontent: null,\rcreatedAt: 2020-03-21T16:45:01.246Z,\rid: 1,\rpublished: false,\rtitle: 'Hello World',\rauthorId: 1,\r}\r],\rprofile: {\rbio: 'I like turtles',\rid: 1,\ruserId: 1,\r}\r}\r]\ræŸ¥çœ‹æ•°æ®åº“åº”è¯¥ä¹Ÿèƒ½çœ‹åˆ°æˆ‘ä»¬æ·»åŠ äº†ç›¸å¯¹åº”çš„æ•°æ®\nä¸‹é¢å†çœ‹çœ‹ä¿®æ”¹çš„æ“ä½œ\nasync function main() {\rconst post = await prisma.post.update({\rwhere: { id: 1 },\rdata: { published: true },\r})\rconsole.log(post)\r}\rä½ å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡º\n{\rid: 1,\rtitle: 'Hello World',\rcontent: null,\rpublished: true,\rauthorId: 1\r}\ræ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰prismaè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ğŸ˜Š\n5.åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æ•°æ®åº“ #\rå½“æ—¶è®©æˆ‘å°è±¡æœ€æ·±åˆ»çš„è¿˜æ˜¯prismaçš„è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒå¯ä»¥åœ¨æµè§ˆå™¨ä¸­çœ‹æ•°æ®åº“è€¶ï¼\nä½ åªè¦åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤\nnpx prisma studio\rå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ä½ çš„æ•°æ®åº“ï¼Œå¯ä»¥åœ¨è¡¨ä¸­è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æ“ä½œï¼Œå¾ˆæ–¹ä¾¿ä¸æ˜¯å—ï¼Ÿ\nå…³äºprismaè¿æ¥mysqlçš„ç®€å•æ“ä½œåº”ç”¨å°±åˆ°è¿™é‡Œäº†ï¼Œè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œç¬¬ä¸€æ¬¡å†™åšå®¢æ„Ÿè§‰èŠ±äº†å¥½å¤šæ—¶é—´ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æŒºå¼€å¿ƒçš„ï¼Œå¸Œæœ›ä»¥åå¯ä»¥åšæŒä¸‹å»ï¼Œå’Œä½ ä»¬åˆ†äº«å­¦åˆ°çš„ä¸œè¥¿å’Œæˆ‘çš„ç†è§£ğŸ¥³\n","date":"2022å¹´11æœˆ20æ—¥","permalink":"/articles/prisma-mysql/","section":"ä¸€äº›æ–‡ç« ","summary":"ä½¿ç”¨Prismaè¿æ¥mysql","title":"ä½¿ç”¨Prismaè¿æ¥mysql"},{"content":"","date":"0001å¹´01æœˆ01æ—¥","permalink":"/tags/","section":"Tags","summary":"","title":"Tags"}]